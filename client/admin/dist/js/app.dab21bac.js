(function(t){function e(e){for(var o,r,l=e[0],s=e[1],c=e[2],u=0,m=[];u<l.length;u++)r=l[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,l=1;l<a.length;l++){var s=a[l];0!==n[s]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},n={app:0},i=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=s;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("71ec"),n=a.n(o);n.a},"0bc8":function(t,e,a){t.exports=a.p+"img/logo_white.28fff3d0.png"},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);var o=a("2b0e"),n=a("bc3a"),i=a.n(n);let r={};const l=i.a.create(r);l.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),l.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=l,window.axios=l,Object.defineProperties(t.prototype,{axios:{get(){return l}},$axios:{get(){return l}}})},o["a"].use(Plugin);Plugin;var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("app-navbar"),a("v-content",[a("v-snackbar",{attrs:{value:t.error,timeout:0,color:"error"}},[t._v("\n      "+t._s(t.error)+"\n    ")]),a("router-view",{key:t.$route.fullPath})],1)],1)},c=[],d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-navigation-drawer",{attrs:{clipped:t.$vuetify.breakpoint.lgAndUp,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[o("v-list",{attrs:{dense:""}},[t._l(t.items,(function(e){return[o("v-list-item",{key:e.text,attrs:{to:e.path,link:""},on:{click:e.click}},[o("v-list-item-action",[o("v-icon",[t._v(t._s(e.icon))])],1),o("v-list-item-content",[o("v-list-item-title",[t._v("\n              "+t._s(e.text)+"\n            ")])],1)],1)]}))],2)],1),o("v-app-bar",{attrs:{"clipped-left":t.$vuetify.breakpoint.lgAndUp,dark:"",app:"",color:"blue"}},[o("v-btn",{staticClass:"ml-0",attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.toggleDrawer(e)}}},[o("v-icon",[t._v("fa-bars")])],1),o("v-toolbar-title",{staticClass:"ml-3"},[o("span",{staticClass:"hidden-sm-and-down ml-2"},[t._v("Article CMS")])]),o("v-spacer"),o("v-btn",{staticClass:"mr-3",attrs:{icon:""}},[o("v-avatar",{attrs:{size:"30",tile:""}},[o("v-img",{attrs:{src:a("0bc8")}})],1)],1),t.processing?o("v-progress-linear",{staticClass:"mt-0",staticStyle:{bottom:"-4px"},attrs:{indeterminate:!0,color:"blue",absolute:""}}):t._e()],1)],1)},u=[],m=a("2f62"),h={data(){return{}},computed:{isUserAuthenticated(){return this.$store.getters.isUserAuthenticated},processing(){return this.$store.getters.getProcessing},email(){return this.$store.getters.getUserEmail},drawer:{get(){return this.$store.getters.getDrawer},set(t){this.setDrawer(t)}},items(){return this.isUserAuthenticated?[{icon:"fa-home",text:"Главная страница",path:{path:"/index"},click:()=>{}},{icon:"fa-search",text:"Страница поиска",path:{path:"/search"},click:()=>{}},{icon:"fa-book",text:"О проекте",path:{path:"/about"},click:()=>{}},{icon:"fa-map-marker-alt",text:"Контакты",path:{path:"/contact"},click:()=>{}},{icon:"fa-university",text:"Условия использования",path:{path:"/terms"},click:()=>{}},{icon:"fa-folder-open",text:"Все статьи",path:{path:"/all_articles"},click:()=>{}},{icon:"fa-edit",text:"Редактор статей",path:{path:"/articles"},click:()=>{}},{icon:"fa-cog",text:"Настройки",path:{path:"/settings"},click:()=>{}},{icon:"fa-file",text:"Файл robots.txt",path:{path:"/robots.txt"},click:()=>{}},{icon:"fa-money-check-alt",text:"Файл ads.txt",path:{path:"/ads.txt"},click:()=>{}},{icon:"fa-sign-out-alt",text:"Выйти",click:()=>{this.$store.dispatch("SIGNOUT").then(()=>{this.$router.push("/signin")})}}]:[{icon:"fa-sign-in-alt",text:"Войти",path:{path:"/signin"},click:()=>{}}]}},methods:{...Object(m["b"])(["setDrawer","toggleDrawer"])}},p=h,v=(a("fe0e"),a("2877")),f=a("6544"),b=a.n(f),g=a("40dc"),_=a("8212"),C=a("8336"),E=a("132d"),x=a("adda"),k=a("8860"),T=a("da13"),w=a("1800"),y=a("5d23"),D=a("f774"),S=a("8e36"),$=a("2fa4"),O=a("2a7f"),N=Object(v["a"])(p,d,u,!1,null,"38e5eca7",null),V=N.exports;b()(N,{VAppBar:g["a"],VAvatar:_["a"],VBtn:C["a"],VIcon:E["a"],VImg:x["a"],VList:k["a"],VListItem:T["a"],VListItemAction:w["a"],VListItemContent:y["a"],VListItemTitle:y["b"],VNavigationDrawer:D["a"],VProgressLinear:S["a"],VSpacer:$["a"],VToolbarTitle:O["a"]});var R={data(){return{}},components:{AppNavbar:V},computed:{error(){return this.$store.getters.getError}}},M=R,U=(a("034f"),a("7496")),A=a("a75b"),I=a("2db4"),L=Object(v["a"])(M,s,c,!1,null,null,null),P=L.exports;b()(L,{VApp:U["a"],VContent:A["a"],VSnackbar:I["a"]});var q=a("8c4f"),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"blue",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Аутентификация")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"fa-envelope",type:"text",required:"",placeholder:" "},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{label:"Password",name:"password","prepend-icon":"lock",type:"password",required:"",placeholder:" "},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{dark:!t.processing,color:"blue",disabled:t.processing},on:{click:function(e){return e.preventDefault(),t.signin(e)}}},[t._v("\n            Войти\n          ")])],1)],1)],1)],1)],1)},G=[],B={data(){return{email:"",password:""}},computed:{error(){return this.$store.getters.getError},processing(){return this.$store.getters.getProcessing}},methods:{signin(){this.$store.dispatch("SIGNIN",{email:this.email,password:this.password}).then(()=>{this.$router.push("/")})}}},F=B,H=a("b0af"),K=a("99d9"),z=a("62ad"),Y=a("a523"),J=a("4bd4"),W=a("0fd9"),Z=a("8654"),Q=a("71d9"),X=Object(v["a"])(F,j,G,!1,null,null,null),tt=X.exports;b()(X,{VBtn:C["a"],VCard:H["a"],VCardActions:K["a"],VCardText:K["b"],VCol:z["a"],VContainer:Y["a"],VForm:J["a"],VRow:W["a"],VSpacer:$["a"],VTextField:Z["a"],VToolbar:Q["a"],VToolbarTitle:O["a"]});var et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Мета-теги страницы")]),a("v-text-field",{attrs:{label:"Last Modified",disabled:""},model:{value:t.lastModified,callback:function(e){t.lastModified=e},expression:"lastModified"}}),a("v-text-field",{attrs:{label:"Title"},model:{value:t.doc.metadata.title,callback:function(e){t.$set(t.doc.metadata,"title",e)},expression:"doc.metadata.title"}}),a("v-text-field",{attrs:{label:"Keywords"},model:{value:t.doc.metadata.keywords,callback:function(e){t.$set(t.doc.metadata,"keywords",e)},expression:"doc.metadata.keywords"}}),a("v-textarea",{attrs:{label:"Description"},model:{value:t.doc.metadata.description,callback:function(e){t.$set(t.doc.metadata,"description",e)},expression:"doc.metadata.description"}}),t.doc.content?a("v-col",{staticClass:"pa-0"},[a("h3",{staticClass:"headline mt-3"},[t._v("Контент страницы")]),a("editor",{ref:"editor",attrs:{image:t.imageToolConfig,header:"",list:"",paragraph:"",raw:"",delimiter:"",code:"",warning:"",quote:"",marker:"",linkTool:"",inlineCode:"",table:"",autofocus:!1,"init-data":t.doc.content},on:{change:t.editorOnChange,save:t.editorOnSave}})],1):t._e(),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},at=[],ot=a("1503"),nt=a("4487");const it=function(){return{config:{uploader:{uploadByFile:t=>{const e=`${Object(nt["generate"])(16)}.${t.type.split("/")[1]}`;return this.$store.dispatch("UPLOAD_FILE",{directory:"/images/",file:t,name:e}).then(t=>t?{success:1,file:{url:`/static_files/images/${e}`}}:Promise.reject())}}}}},rt=function(){let t;t=this.doc.metadata.lastModified?new Date(this.doc.metadata.lastModified):new Date;const e={year:"numeric",month:"long",day:"numeric",weekday:"long",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"};return t.toLocaleString("ru",e)};var lt={data(){return{doc:{name:"",metadata:{type:"basic-article",title:"",keywords:"",description:"",created:"",lastModified:"",author:null},content:null}}},components:{Editor:ot["a"]},computed:{lastModified:rt,imageToolConfig:it},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"index"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{async updateDocument(){this.$refs.editor&&await this.$refs.editor.save(),this.doc.metadata.lastModified=(new Date).toISOString(),this.doc.metadata.author={user_id:this.$store.getters.getUser_id},this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"index"},doc:this.doc})},editorOnSave(t){this.doc.content=t},editorOnChange(){return Promise.resolve()}}},st=lt,ct=a("a722"),dt=a("a844"),ut=Object(v["a"])(st,et,at,!1,null,null,null),mt=ut.exports;b()(ut,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VLayout:ct["a"],VTextField:Z["a"],VTextarea:dt["a"]});var ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Мета-теги страницы")]),a("v-text-field",{attrs:{label:"Last Modified",disabled:""},model:{value:t.lastModified,callback:function(e){t.lastModified=e},expression:"lastModified"}}),a("v-text-field",{attrs:{label:"Title"},model:{value:t.doc.metadata.title,callback:function(e){t.$set(t.doc.metadata,"title",e)},expression:"doc.metadata.title"}}),a("v-text-field",{attrs:{label:"Keywords"},model:{value:t.doc.metadata.keywords,callback:function(e){t.$set(t.doc.metadata,"keywords",e)},expression:"doc.metadata.keywords"}}),a("v-textarea",{attrs:{label:"Description"},model:{value:t.doc.metadata.description,callback:function(e){t.$set(t.doc.metadata,"description",e)},expression:"doc.metadata.description"}}),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},pt=[],vt={data(){return{doc:{name:"",metadata:{type:"basic-article",title:"",keywords:"",description:"",created:"",lastModified:"",author:null}}}},computed:{lastModified:rt},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"search"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{async updateDocument(){this.$refs.editor&&await this.$refs.editor.save(),this.doc.metadata.lastModified=(new Date).toISOString(),this.doc.metadata.author={user_id:this.$store.getters.getUser_id},this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"search"},doc:this.doc})},editorOnSave(t){this.doc.content=t},editorOnChange(){return Promise.resolve()}}},ft=vt,bt=Object(v["a"])(ft,ht,pt,!1,null,null,null),gt=bt.exports;b()(bt,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VLayout:ct["a"],VTextField:Z["a"],VTextarea:dt["a"]});var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Мета-теги страницы")]),a("v-text-field",{attrs:{label:"Last Modified",disabled:""},model:{value:t.lastModified,callback:function(e){t.lastModified=e},expression:"lastModified"}}),a("v-text-field",{attrs:{label:"Title"},model:{value:t.doc.metadata.title,callback:function(e){t.$set(t.doc.metadata,"title",e)},expression:"doc.metadata.title"}}),a("v-text-field",{attrs:{label:"Keywords"},model:{value:t.doc.metadata.keywords,callback:function(e){t.$set(t.doc.metadata,"keywords",e)},expression:"doc.metadata.keywords"}}),a("v-textarea",{attrs:{label:"Description"},model:{value:t.doc.metadata.description,callback:function(e){t.$set(t.doc.metadata,"description",e)},expression:"doc.metadata.description"}}),t.doc.content?a("v-col",{staticClass:"pa-0"},[a("h3",{staticClass:"headline mt-3"},[t._v("Контент страницы")]),a("editor",{ref:"editor",attrs:{image:t.imageToolConfig,header:"",list:"",paragraph:"",raw:"",delimiter:"",code:"",warning:"",quote:"",marker:"",linkTool:"",inlineCode:"",table:"",autofocus:!1,"init-data":t.doc.content},on:{change:t.editorOnChange,save:t.editorOnSave}})],1):t._e(),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},Ct=[],Et={data(){return{doc:{name:"",metadata:{type:"basic-article",title:"",keywords:"",description:"",created:"",lastModified:"",author:null},content:null}}},components:{Editor:ot["a"]},computed:{lastModified:rt,imageToolConfig:it},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"about"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{async updateDocument(){this.$refs.editor&&await this.$refs.editor.save(),this.doc.metadata.lastModified=(new Date).toISOString(),this.doc.metadata.author={user_id:this.$store.getters.getUser_id},this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"about"},doc:this.doc})},editorOnSave(t){this.doc.content=t},editorOnChange(){return Promise.resolve()}}},xt=Et,kt=Object(v["a"])(xt,_t,Ct,!1,null,null,null),Tt=kt.exports;b()(kt,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VLayout:ct["a"],VTextField:Z["a"],VTextarea:dt["a"]});var wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Мета-теги страницы")]),a("v-text-field",{attrs:{label:"Last Modified",disabled:""},model:{value:t.lastModified,callback:function(e){t.lastModified=e},expression:"lastModified"}}),a("v-text-field",{attrs:{label:"Title"},model:{value:t.doc.metadata.title,callback:function(e){t.$set(t.doc.metadata,"title",e)},expression:"doc.metadata.title"}}),a("v-text-field",{attrs:{label:"Keywords"},model:{value:t.doc.metadata.keywords,callback:function(e){t.$set(t.doc.metadata,"keywords",e)},expression:"doc.metadata.keywords"}}),a("v-textarea",{attrs:{label:"Description"},model:{value:t.doc.metadata.description,callback:function(e){t.$set(t.doc.metadata,"description",e)},expression:"doc.metadata.description"}}),t.doc.content?a("v-col",{staticClass:"pa-0"},[a("h3",{staticClass:"headline mt-3"},[t._v("Контент страницы")]),a("editor",{ref:"editor",attrs:{image:t.imageToolConfig,header:"",list:"",paragraph:"",raw:"",delimiter:"",code:"",warning:"",quote:"",marker:"",linkTool:"",inlineCode:"",table:"",autofocus:!1,"init-data":t.doc.content},on:{change:t.editorOnChange,save:t.editorOnSave}})],1):t._e(),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},yt=[],Dt={data(){return{doc:{name:"",metadata:{type:"basic-article",title:"",keywords:"",description:"",created:"",lastModified:"",author:null},content:null}}},components:{Editor:ot["a"]},computed:{lastModified:rt,imageToolConfig:it},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"contact"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{async updateDocument(){this.$refs.editor&&await this.$refs.editor.save(),this.doc.metadata.lastModified=(new Date).toISOString(),this.doc.metadata.author={user_id:this.$store.getters.getUser_id},this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"contact"},doc:this.doc})},editorOnSave(t){this.doc.content=t},editorOnChange(){return Promise.resolve()}}},St=Dt,$t=Object(v["a"])(St,wt,yt,!1,null,null,null),Ot=$t.exports;b()($t,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VLayout:ct["a"],VTextField:Z["a"],VTextarea:dt["a"]});var Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Мета-теги страницы")]),a("v-text-field",{attrs:{label:"Last Modified",disabled:""},model:{value:t.lastModified,callback:function(e){t.lastModified=e},expression:"lastModified"}}),a("v-text-field",{attrs:{label:"Title"},model:{value:t.doc.metadata.title,callback:function(e){t.$set(t.doc.metadata,"title",e)},expression:"doc.metadata.title"}}),a("v-text-field",{attrs:{label:"Keywords"},model:{value:t.doc.metadata.keywords,callback:function(e){t.$set(t.doc.metadata,"keywords",e)},expression:"doc.metadata.keywords"}}),a("v-textarea",{attrs:{label:"Description"},model:{value:t.doc.metadata.description,callback:function(e){t.$set(t.doc.metadata,"description",e)},expression:"doc.metadata.description"}}),t.doc.content?a("v-col",{staticClass:"pa-0"},[a("h3",{staticClass:"headline mt-3"},[t._v("Контент страницы")]),a("editor",{ref:"editor",attrs:{image:t.imageToolConfig,header:"",list:"",paragraph:"",raw:"",delimiter:"",code:"",warning:"",quote:"",marker:"",linkTool:"",inlineCode:"",table:"",autofocus:!1,"init-data":t.doc.content},on:{change:t.editorOnChange,save:t.editorOnSave}})],1):t._e(),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},Vt=[],Rt={data(){return{doc:{name:"",metadata:{type:"basic-article",title:"",keywords:"",description:"",created:"",lastModified:"",author:null},content:null}}},components:{Editor:ot["a"]},computed:{lastModified:rt,imageToolConfig:it},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"terms"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{async updateDocument(){this.$refs.editor&&await this.$refs.editor.save(),this.doc.metadata.lastModified=(new Date).toISOString(),this.doc.metadata.author={user_id:this.$store.getters.getUser_id},this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"terms"},doc:this.doc})},editorOnSave(t){this.doc.content=t},editorOnChange(){return Promise.resolve()}}},Mt=Rt,Ut=Object(v["a"])(Mt,Nt,Vt,!1,null,null,null),At=Ut.exports;b()(Ut,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VLayout:ct["a"],VTextField:Z["a"],VTextarea:dt["a"]});var It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Мета-теги страницы")]),a("v-text-field",{attrs:{label:"Last Modified",disabled:""},model:{value:t.lastModified,callback:function(e){t.lastModified=e},expression:"lastModified"}}),a("v-text-field",{attrs:{label:"Title"},model:{value:t.doc.metadata.title,callback:function(e){t.$set(t.doc.metadata,"title",e)},expression:"doc.metadata.title"}}),a("v-text-field",{attrs:{label:"Keywords"},model:{value:t.doc.metadata.keywords,callback:function(e){t.$set(t.doc.metadata,"keywords",e)},expression:"doc.metadata.keywords"}}),a("v-textarea",{attrs:{label:"Description"},model:{value:t.doc.metadata.description,callback:function(e){t.$set(t.doc.metadata,"description",e)},expression:"doc.metadata.description"}}),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},Lt=[],Pt={data(){return{doc:{name:"",metadata:{type:"basic-article",title:"",keywords:"",description:"",created:"",lastModified:"",author:null}}}},computed:{lastModified:rt},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"allArticles"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{async updateDocument(){this.doc.metadata.lastModified=(new Date).toISOString(),this.doc.metadata.author={user_id:this.$store.getters.getUser_id},this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"allArticles"},doc:this.doc})},editorOnSave(t){this.doc.content=t},editorOnChange(){return Promise.resolve()}}},qt=Pt,jt=Object(v["a"])(qt,It,Lt,!1,null,null,null),Gt=jt.exports;b()(jt,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VLayout:ct["a"],VTextField:Z["a"],VTextarea:dt["a"]});var Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-btn",{staticClass:"mb-3 mt-3",attrs:{color:"blue",dark:""},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{left:""}},[t._v("fa-chevron-left")]),t._v("\n    Назад\n  ")],1),a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Список вложенных страниц:")]),a("v-data-table",{staticClass:"elevation-1 mt-3",attrs:{headers:t.childrenTableHeaders,items:t.children},scopedSlots:t._u([{key:"item.actions",fn:function(e){var o=e.item;return[a("v-btn",{staticClass:"ml-3",attrs:{disabled:o.order==t.children[0].order,icon:"",small:""},on:{click:function(e){return t.orderUp(o)}}},[a("v-icon",{attrs:{small:""}},[t._v("fa-arrow-up")])],1),a("v-btn",{staticClass:"ml-3",attrs:{disabled:o.order==t.children[t.children.length-1].order,icon:"",small:""},on:{click:function(e){return t.orderDown(o)}}},[a("v-icon",{attrs:{small:""}},[t._v("fa-arrow-down")])],1),a("v-btn",{staticClass:"ml-3",attrs:{icon:"",to:"/articles/"+o.name,small:""}},[a("v-icon",[t._v("edit")])],1),a("v-btn",{staticClass:"ml-3 mr-3",attrs:{icon:"",small:""},on:{click:function(e){return t.deleteChild(o)}}},[a("v-icon",[t._v("delete_outline")])],1)]}}])}),a("h3",{staticClass:"headline mt-3"},[t._v("Создать вложенную страницу:")]),a("v-alert",{staticClass:"mt-3",attrs:{outlined:"",type:"warning",prominent:"",border:"left"}},[t._v("\n      После создания статьи данное поле изменить будет нельзя.\n    ")]),a("v-text-field",{attrs:{label:"Name"},on:{keypress:function(e){return t.filterNewDocument(e)}},model:{value:t.newDocument,callback:function(e){t.newDocument=e},expression:"newDocument"}}),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"success"},on:{click:t.handleCreateNewDocument}},[t._v("\n          Создать\n      ")])],1)],1),t.showDeleteDialog?a("custom-dialog",{attrs:{show:t.showDeleteDialog,"card-title":"Удалить страницу","card-text":"Вы действительно хотите удалить страницу '"+t.selectedChild.articleName+"'? Отменить это действие будет нельзя.","button-title":"Удалить","button-color":"error"},on:{handle:t.handleDeleteChild,close:t.handleCloseDeleteChild}}):t._e()],1)},Ft=[];const Ht=function(t){const e=this.children.findIndex(e=>e.name==t.name&&e.parent==t.parent),a=this.children[e-1];this.$store.dispatch("UPDATE_DOCUMENT",{collection:"articles",query:{name:t.name,parent:t.parent},doc:{order:a.order}}).then(()=>this.$store.dispatch("UPDATE_DOCUMENT",{collection:"articles",query:{name:a.name,parent:a.parent},doc:{order:t.order}})).then(()=>this.fetchData())},Kt=function(t){const e=this.children.findIndex(e=>e.name==t.name&&e.parent==t.parent),a=this.children[e+1];this.$store.dispatch("UPDATE_DOCUMENT",{collection:"articles",query:{name:t.name,parent:t.parent},doc:{order:a.order}}).then(()=>this.$store.dispatch("UPDATE_DOCUMENT",{collection:"articles",query:{name:a.name,parent:a.parent},doc:{order:t.order}})).then(()=>this.fetchData())};var zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{value:t.show,"max-width":"290"},on:{"click:outside":t.handleClose}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("\n        "+t._s(t.cardTitle)+"\n      ")]),a("v-card-text",[t._v(t._s(t.cardText))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.handleClose}},[t._v("\n          Отмена\n        ")]),a("v-btn",{attrs:{color:t.buttonColor,text:""},on:{click:t.handle}},[t._v("\n          "+t._s(t.buttonTitle)+"\n        ")])],1)],1)],1)],1)},Yt=[],Jt={props:{show:Boolean,cardTitle:String,cardText:String,buttonTitle:String,buttonColor:String},methods:{handle(){this.$emit("handle")},handleClose(){this.$emit("close")}}},Wt=Jt,Zt=a("169a"),Qt=Object(v["a"])(Wt,zt,Yt,!1,null,null,null),Xt=Qt.exports;b()(Qt,{VBtn:C["a"],VCard:H["a"],VCardActions:K["a"],VCardText:K["b"],VCardTitle:K["c"],VDialog:Zt["a"],VRow:W["a"],VSpacer:$["a"]});var te={data(){return{children:[],childrenTableHeaders:[{text:"Name",align:"left",value:"name"},{text:"Название статьи",value:"articleName"},{text:"Действия",value:"actions",align:"right"}],newDocument:"",showDeleteDialog:!1,selectedChild:null}},mounted(){this.fetchData()},components:{CustomDialog:Xt},methods:{filterNewDocument(t){const e=String.fromCharCode(t.keyCode);let a=!1;/^[A-Za-z]+$/.test(e)&&(a=!0),/[0-9]/.test(e)&&(a=!0),"-"===e&&(a=!0),"_"===e&&(a=!0),"."===e&&(a=!0),a||t.preventDefault()},fetchData(){this.$store.dispatch("GET_MANY",{collection:"articles",query:{parent:""},projection:{content:0}}).then(t=>{t&&(t.sort((t,e)=>t.order>e.order?1:e.order>t.order?-1:0),this.children=t)})},orderUp:Ht,orderDown:Kt,deleteChild(t){this.selectedChild=t,this.showDeleteDialog=!0},handleDeleteChild(){this.$store.dispatch("GET_MANY",{collection:"articles",query:{parent:"/"+this.selectedChild.name},projection:{content:0}}).then(t=>{if(t&&0===t.length)return this.$store.dispatch("DELETE_DOCUMENT",{collection:"articles",query:{name:this.selectedChild.name,parent:""}}).finally(()=>this.fetchData());this.$store.commit("SET_ERROR","Ошибка удаления! Данная страница содержит вложенные страницы.")}).finally(()=>{this.handleCloseDeleteChild()})},handleCloseDeleteChild(){this.showDeleteDialog=!1,this.selectedChild=null},handleCreateNewDocument(){this.newDocument?(this.$store.commit("CLEAN_ERROR"),this.$router.push(`/articles/${this.newDocument}?create=true&order=${this.children.length?this.children[this.children.length-1].order+1:0}`)):this.$store.commit("SET_ERROR","Поле Name не может быть пустым.")}}},ee=te,ae=a("0798"),oe=a("8fea"),ne=Object(v["a"])(ee,Bt,Ft,!1,null,null,null),ie=ne.exports;b()(ne,{VAlert:ae["a"],VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VDataTable:oe["a"],VIcon:E["a"],VLayout:ct["a"],VTextField:Z["a"]});var re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-btn",{staticClass:"mb-3 mt-3",attrs:{color:"blue",dark:""},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{left:""}},[t._v("fa-chevron-left")]),t._v("\n    Назад\n  ")],1),a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Мета-теги страницы")]),a("v-text-field",{attrs:{label:"Last Modified",disabled:""},model:{value:t.lastModified,callback:function(e){t.lastModified=e},expression:"lastModified"}}),a("v-text-field",{attrs:{label:"Name",disabled:""},model:{value:t.doc.name,callback:function(e){t.$set(t.doc,"name",e)},expression:"doc.name"}}),a("v-text-field",{attrs:{label:"Title"},model:{value:t.doc.metadata.title,callback:function(e){t.$set(t.doc.metadata,"title",e)},expression:"doc.metadata.title"}}),a("v-text-field",{attrs:{label:"Keywords"},model:{value:t.doc.metadata.keywords,callback:function(e){t.$set(t.doc.metadata,"keywords",e)},expression:"doc.metadata.keywords"}}),a("v-textarea",{attrs:{label:"Description"},model:{value:t.doc.metadata.description,callback:function(e){t.$set(t.doc.metadata,"description",e)},expression:"doc.metadata.description"}}),a("h3",{staticClass:"headline mt-3 mb-5"},[t._v("Заголовки страницы")]),a("v-select",{attrs:{items:t.articleStatuses,label:"Статус",outlined:""},model:{value:t.doc.metadata.status,callback:function(e){t.$set(t.doc.metadata,"status",e)},expression:"doc.metadata.status"}}),a("v-select",{attrs:{items:t.articleTypes,label:"Тип статьи",outlined:""},model:{value:t.doc.metadata.type,callback:function(e){t.$set(t.doc.metadata,"type",e)},expression:"doc.metadata.type"}}),a("v-text-field",{attrs:{label:"Название статьи"},model:{value:t.doc.articleName,callback:function(e){t.$set(t.doc,"articleName",e)},expression:"doc.articleName"}}),a("v-textarea",{attrs:{label:"Описание статьи"},model:{value:t.doc.description,callback:function(e){t.$set(t.doc,"description",e)},expression:"doc.description"}}),a("h3",{staticClass:"headline mt-3 mb-3"},[t._v("Превью изображение страницы")]),a("image-loader",{attrs:{image:t.doc.preview?t.doc.preview.image:null},on:{change:t.previewChange}}),t.doc.content?a("v-col",{staticClass:"pa-0"},[a("h3",{staticClass:"headline mt-3"},[t._v("Контент страницы")]),a("editor",{ref:"editor",attrs:{image:t.imageToolConfig,header:"",list:"",paragraph:"",raw:"",delimiter:"",code:"",warning:"",quote:"",marker:"",linkTool:"",inlineCode:"",table:"",autofocus:!1,"init-data":t.doc.content},on:{change:t.editorOnChange,save:t.editorOnSave}})],1):t._e(),a("v-col",{staticClass:"text-left pl-0"},[t.create?a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.createDocument}},[t._v("\n        Создать\n      ")]):a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1),t.create?t._e():a("div",[a("h3",{staticClass:"headline mt-3"},[t._v("Список вложенных страниц:")]),a("v-data-table",{staticClass:"elevation-1 mt-3",attrs:{headers:t.childrenTableHeaders,items:t.children},scopedSlots:t._u([{key:"item.actions",fn:function(e){var o=e.item;return[a("v-btn",{staticClass:"ml-3",attrs:{disabled:o.order==t.children[0].order,icon:"",small:""},on:{click:function(e){return t.orderUp(o)}}},[a("v-icon",{attrs:{small:""}},[t._v("fa-arrow-up")])],1),a("v-btn",{staticClass:"ml-3",attrs:{disabled:o.order==t.children[t.children.length-1].order,icon:"",small:""},on:{click:function(e){return t.orderDown(o)}}},[a("v-icon",{attrs:{small:""}},[t._v("fa-arrow-down")])],1),a("v-btn",{staticClass:"ml-3",attrs:{icon:"",to:"/articles"+t.doc.parent+"/"+t.doc.name+"/"+o.name,small:""}},[a("v-icon",[t._v("edit")])],1),a("v-btn",{staticClass:"ml-3 mr-3",attrs:{icon:"",small:""},on:{click:function(e){return t.deleteChild(o)}}},[a("v-icon",[t._v("delete_outline")])],1)]}}],null,!1,333016570)}),a("h3",{staticClass:"headline mt-3"},[t._v("Создать вложенную страницу:")]),a("v-alert",{staticClass:"mt-3",attrs:{outlined:"",type:"warning",prominent:"",border:"left"}},[t._v("\n        После создания страницы данное поле изменить будет нельзя.\n      ")]),a("v-text-field",{attrs:{label:"Name"},on:{keypress:function(e){return t.filterNewDocument(e)}},model:{value:t.newDocument,callback:function(e){t.newDocument=e},expression:"newDocument"}}),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"success"},on:{click:t.handleCreateNewDocument}},[t._v("\n          Создать\n        ")])],1)],1)],1),t.showDeleteDialog?a("custom-dialog",{attrs:{show:t.showDeleteDialog,"card-title":"Удалить страницу","card-text":"Вы действительно хотите удалить страницу '"+t.selectedChild.articleName+"'? Отменить это действие будет нельзя.","button-title":"Удалить","button-color":"error"},on:{handle:t.handleDeleteChild,close:t.handleCloseDeleteChild}}):t._e()],1)},le=[],se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"10",md:"7"}},[a("v-file-input",{attrs:{outlined:"",accept:"image/*",placeholder:"Изображение",label:"Выбрать файл",clearable:!1},on:{change:t.upload},model:{value:t.fileInput,callback:function(e){t.fileInput=e},expression:"fileInput"}})],1),a("v-col",{attrs:{cols:"2",md:"1"}},[a("v-btn",{staticClass:"mt-1 mr-1",attrs:{icon:"",large:""},on:{click:t.clear}},[a("v-icon",[t._v("delete_outline")])],1)],1),a("v-col",{attrs:{cols:"8",md:"6"}},[t.image?a("v-img",{staticClass:"grey lighten-2 ml-auto mr-auto",attrs:{src:t.image.file.url,"max-width":t.previewMaxWidth}}):t._e()],1)],1)},ce=[],de={props:{image:Object,previewMaxWidth:{type:String,default:"100%"}},data(){return{fileInput:null}},computed:{imageToolConfig:it},methods:{upload(t){t?this.imageToolConfig.config.uploader.uploadByFile(t).then(({file:t})=>this.$emit("change",{file:t})).catch(()=>this.$emit("change",null)):this.$emit("change",null)},clear(){this.fileInput=null,this.$emit("change",null)}}},ue=de,me=a("23a7"),he=Object(v["a"])(ue,se,ce,!1,null,null,null),pe=he.exports;b()(he,{VBtn:C["a"],VCol:z["a"],VFileInput:me["a"],VIcon:E["a"],VImg:x["a"],VRow:W["a"]});var ve={data(){return{doc:{name:this.$route.path.replace("articles","").replace(/^.*[\\\/]/,""),parent:this.$route.path.replace("/articles","").replace(/[^\/]*$/,"").replace(/\/$/,""),order:parseInt(this.$route.query.order),metadata:{status:"unpublished",type:"basic-article",title:"",keywords:"",description:"",created:"",lastModified:"",author:{user_id:""}},preview:null,content:null,statistics:{impressions:0},articleName:"",description:""},create:"true"==this.$route.query.create,articleStatuses:[{text:"Не опубликовано",value:"unpublished"},{text:"Опубликовано",value:"published"}],articleTypes:[{text:"Статья",value:"basic-article"},{text:"Категория",value:"category"}],children:[],childrenTableHeaders:[{text:"Name",align:"left",value:"name"},{text:"Название статьи",value:"articleName"},{text:"Действия",value:"actions",align:"right"}],newDocument:"",showDeleteDialog:!1,selectedChild:null}},components:{CustomDialog:Xt,Editor:ot["a"],ImageLoader:pe},computed:{lastModified:rt,imageToolConfig:it},mounted(){this.create?this.doc.content={}:this.fetchData()},methods:{filterNewDocument(t){const e=String.fromCharCode(t.keyCode);let a=!1;/^[A-Za-z]+$/.test(e)&&(a=!0),/[0-9]/.test(e)&&(a=!0),"-"===e&&(a=!0),"_"===e&&(a=!0),"."===e&&(a=!0),a||t.preventDefault()},fetchData(){this.$store.dispatch("GET_DOCUMENT",{collection:"articles",query:{name:this.doc.name,parent:this.doc.parent}}).then(t=>(t&&(delete t._id,this.doc=t),this.$store.dispatch("GET_MANY",{collection:"articles",query:{parent:this.doc.parent+"/"+this.doc.name},projection:{content:0}}))).then(t=>{t&&(t.sort((t,e)=>t.order>e.order?1:e.order>t.order?-1:0),this.children=t)})},async updateDocument(){this.$refs.editor&&await this.$refs.editor.save(),this.doc.metadata.lastModified=(new Date).toISOString(),this.doc.metadata.author={user_id:this.$store.getters.getUser_id},this.$store.dispatch("UPDATE_DOCUMENT",{collection:"articles",query:{name:this.doc.name,parent:this.doc.parent},doc:this.doc})},async createDocument(){this.$refs.editor&&await this.$refs.editor.save(),this.doc.metadata.created=(new Date).toISOString(),this.doc.metadata.lastModified=(new Date).toISOString(),this.doc.metadata.author={user_id:this.$store.getters.getUser_id},this.$store.dispatch("CREATE_DOCUMENT",{collection:"articles",doc:this.doc}).then(()=>{this.$router.replace({...this.$router.currentRoute,query:{create:void 0}}),this.create=!1})},previewChange(t){this.doc.preview=t?{image:t}:null},editorOnSave(t){this.doc.content=t},editorOnChange(){return Promise.resolve()},orderUp:Ht,orderDown:Kt,deleteChild(t){this.selectedChild=t,this.showDeleteDialog=!0},handleDeleteChild(){this.$store.dispatch("GET_MANY",{collection:"articles",query:{parent:this.doc.parent+"/"+this.doc.name+"/"+this.selectedChild.name},projection:{content:0}}).then(t=>{if(t&&0===t.length)return this.$store.dispatch("DELETE_DOCUMENT",{collection:"articles",query:{name:this.selectedChild.name,parent:this.doc.parent+"/"+this.doc.name}}).then(()=>this.fetchData());this.$store.commit("SET_ERROR","Ошибка удаления! Данная страница содержит вложенные страницы.")}).finally(()=>{this.handleCloseDeleteChild()})},handleCloseDeleteChild(){this.showDeleteDialog=!1,this.selectedChild=null},handleCreateNewDocument(){this.newDocument?(this.$store.commit("CLEAN_ERROR"),this.$router.push(`/articles${this.doc.parent}/${this.doc.name}/${this.newDocument}?create=true&order=${this.children.length?this.children[this.children.length-1].order+1:0}`)):this.$store.commit("SET_ERROR","Поле Name не может быть пустым.")}}},fe=ve,be=a("b974"),ge=Object(v["a"])(fe,re,le,!1,null,null,null),_e=ge.exports;b()(ge,{VAlert:ae["a"],VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VDataTable:oe["a"],VIcon:E["a"],VLayout:ct["a"],VSelect:be["a"],VTextField:Z["a"],VTextarea:dt["a"]});var Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("h3",{staticClass:"headline mt-3"},[t._v("Свойства проекта")]),a("v-text-field",{staticClass:"mt-5",attrs:{label:"Название проекта"},model:{value:t.doc.projectName,callback:function(e){t.$set(t.doc,"projectName",e)},expression:"doc.projectName"}}),a("v-row",[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-select",{attrs:{items:t.protocols,label:"Протокол",outlined:""},model:{value:t.doc.protocol,callback:function(e){t.$set(t.doc,"protocol",e)},expression:"doc.protocol"}})],1),a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-text-field",{attrs:{label:"Домен"},model:{value:t.doc.domain,callback:function(e){t.$set(t.doc,"domain",e)},expression:"doc.domain"}})],1)],1),a("h3",{staticClass:"headline mt-3 mb-3"},[t._v("Логотип проекта")]),a("image-loader",{attrs:{image:t.doc.logo?t.doc.logo.image:null,"preview-max-width":"256"},on:{change:t.logoChange}}),a("h3",{staticClass:"headline mt-3 mb-3"},[t._v("Favicon проекта")]),a("image-loader",{attrs:{image:t.doc.icon.favicon?t.doc.icon.favicon.image:null,"preview-max-width":"48"},on:{change:t.faviconChange}}),a("h3",{staticClass:"headline mt-3"},[t._v("Элементы навигационной панели")]),a("v-data-table",{staticClass:"elevation-1 mt-3",attrs:{headers:t.navbarLinksTableHeaders,items:t.doc.components.navbar.links,"items-per-page":5},scopedSlots:t._u([{key:"item.actions",fn:function(e){var o=e.item;return[a("v-btn",{staticClass:"ml-3 mr-3",attrs:{icon:"",small:""},on:{click:function(e){return t.deleteNavbarLink(o.url)}}},[a("v-icon",[t._v("delete_outline")])],1)]}}])}),a("v-row",[a("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Url",outlined:""},model:{value:t.newNavbarLink.url,callback:function(e){t.$set(t.newNavbarLink,"url",e)},expression:"newNavbarLink.url"}})],1),a("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[a("v-text-field",{attrs:{label:"Анкор",outlined:""},model:{value:t.newNavbarLink.anchor,callback:function(e){t.$set(t.newNavbarLink,"anchor",e)},expression:"newNavbarLink.anchor"}})],1),a("v-col",{staticClass:"pt-0"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.addNavbarLink}},[t._v("\n          Добавить\n        ")])],1)],1),a("h3",{staticClass:"headline mt-3"},[t._v("Содержимое компонентов страниц")]),a("v-textarea",{staticClass:"mt-5",attrs:{label:"Cодержимое тега <head>",outlined:""},model:{value:t.doc.components.head.html,callback:function(e){t.$set(t.doc.components.head,"html",e)},expression:"doc.components.head.html"}}),a("v-textarea",{attrs:{label:"Дополнительные скрипты в конце страницы",outlined:""},model:{value:t.doc.components.scripts.html,callback:function(e){t.$set(t.doc.components.scripts,"html",e)},expression:"doc.components.scripts.html"}}),a("v-textarea",{attrs:{label:"Исходный код блока коментариев",outlined:""},model:{value:t.doc.components.comments.html,callback:function(e){t.$set(t.doc.components.comments,"html",e)},expression:"doc.components.comments.html"}}),a("v-textarea",{attrs:{label:"Исходный код блока ссылок соцсетей",outlined:""},model:{value:t.doc.components.shareLinks.html,callback:function(e){t.$set(t.doc.components.shareLinks,"html",e)},expression:"doc.components.shareLinks.html"}}),a("v-col",{staticClass:"text-left pl-0"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},Ee=[],xe={data(){return{doc:{name:"",projectName:"",domain:"",protocol:"",components:{navbar:{links:[]},head:{html:""},scripts:{html:""},comments:{html:""},shareLinks:{html:""}},logo:null,icon:{favicon:null}},protocols:["http://","https://"],navbarLinksTableHeaders:[{text:"Url",align:"left",value:"url"},{text:"Анкор",value:"anchor"},{text:"Действия",value:"actions",align:"right"}],newNavbarLink:{url:"",anchor:""}}},components:{ImageLoader:pe},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"common"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{async updateDocument(){this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"common"},doc:this.doc})},logoChange(t){this.doc.logo=t?{image:t}:null},faviconChange(t){this.doc.icon.favicon=t?{image:t}:null},deleteNavbarLink(t){const e=this.doc.components.navbar.links.findIndex(e=>e.url===t);this.doc.components.navbar.links.splice(e,1)},addNavbarLink(){this.doc.components.navbar.links.push(Object.assign({},this.newNavbarLink)),this.newNavbarLink.url="",this.newNavbarLink.anchor=""}}},ke=xe,Te=Object(v["a"])(ke,Ce,Ee,!1,null,null,null),we=Te.exports;b()(Te,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VDataTable:oe["a"],VIcon:E["a"],VLayout:ct["a"],VRow:W["a"],VSelect:be["a"],VTextField:Z["a"],VTextarea:dt["a"]});var ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("v-col",{staticClass:"mt-5 pt-5 pb-0"},[a("v-textarea",{attrs:{outlined:"",label:"Содержимое файла robots.txt",placeholder:"User-agent: *"},model:{value:t.doc.content,callback:function(e){t.$set(t.doc,"content",e)},expression:"doc.content"}})],1),a("v-col",{staticClass:"text-left"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},De=[],Se={data(){return{doc:{name:"",content:""}}},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"robots"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{updateDocument(){this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"robots"},doc:this.doc})}}},$e=Se,Oe=Object(v["a"])($e,ye,De,!1,null,null,null),Ne=Oe.exports;b()(Oe,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VLayout:ct["a"],VTextarea:dt["a"]});var Ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",{attrs:{column:""}},[a("v-col",{staticClass:"mt-5 pt-5 pb-0"},[a("v-textarea",{attrs:{outlined:"",label:"Содержимое файла ads.txt",placeholder:"google.com, pub-..."},model:{value:t.doc.content,callback:function(e){t.$set(t.doc,"content",e)},expression:"doc.content"}})],1),a("v-col",{staticClass:"text-left"},[a("v-btn",{attrs:{color:"blue",dark:""},on:{click:t.updateDocument}},[t._v("\n        Сохранить\n      ")])],1)],1)],1)},Re=[],Me={data(){return{doc:{name:"",content:""}}},mounted(){this.$store.dispatch("GET_DOCUMENT",{collection:"service",query:{name:"ads"}}).then(t=>{t&&(delete t._id,this.doc=t)})},methods:{updateDocument(){this.$store.dispatch("UPDATE_DOCUMENT",{collection:"service",query:{name:"ads"},doc:this.doc})}}},Ue=Me,Ae=Object(v["a"])(Ue,Ve,Re,!1,null,null,null),Ie=Ae.exports;b()(Ae,{VBtn:C["a"],VCol:z["a"],VContainer:Y["a"],VLayout:ct["a"],VTextarea:dt["a"]});const Le=t=>(e,a)=>e[t]=a,Pe=t=>e=>e[t]=!e[t],qe={processing:!1,error:null,drawer:null},je={getProcessing:t=>t.processing,getError:t=>t.error,getDrawer:t=>t.drawer},Ge={SET_PROCESSING:Le("processing"),SET_ERROR:Le("error"),CLEAN_ERROR:t=>{t.error=null},setDrawer:Le("drawer"),toggleDrawer:Pe("drawer")};var Be={state:qe,getters:je,mutations:Ge};const Fe={isAuthenticated:JSON.parse(localStorage.getItem("isAuthenticated"))},He={isUserAuthenticated:t=>t.isAuthenticated},Ke={SET_USER_AUTHENTICATED(t,e){t.isAuthenticated=e,localStorage.setItem("isAuthenticated",e)}},ze={SIGNIN({commit:t},e){return t("SET_PROCESSING",!0),t("CLEAN_ERROR"),i.a.post("/api/authentication/signin",e).then(t=>t.data).then(e=>{t("SET_USER_AUTHENTICATED",!0),t("SET_USER_EMAIL",e.email),t("SET_USER_ID",e._id)}).catch(()=>t("SET_ERROR","Ошибка! Адрес электронной почты или пароль введены неверно.")).finally(()=>t("SET_PROCESSING",!1))},SIGNOUT({commit:t}){return t("SET_PROCESSING",!0),t("CLEAN_ERROR"),i.a.post("/api/authentication/signout").then(()=>{t("SET_USER_AUTHENTICATED",!1),t("SET_USER_EMAIL",""),t("SET_USER_ID","")}).catch(()=>t("SET_ERROR","Ошибка! Выход из системы не выполнен.")).finally(()=>t("SET_PROCESSING",!1))}};var Ye={state:Fe,getters:He,mutations:Ke,actions:ze};const Je={GET_MANY({commit:t},{collection:e,query:a,limit:o,skip:n,projection:r}){return t("CLEAN_ERROR"),t("SET_PROCESSING",!0),i.a.post("/api/documents/get_many",{collection:e,query:a,limit:o,skip:n,projection:r}).then(t=>t.data).catch(()=>t("SET_ERROR","Ошибка при загрузке списка документов.")).finally(()=>t("SET_PROCESSING",!1))},GET_DOCUMENT({commit:t},{collection:e,query:a}){return t("CLEAN_ERROR"),t("SET_PROCESSING",!0),i.a.post("/api/documents/get",{collection:e,query:a}).then(t=>t.data).catch(()=>t("SET_ERROR","Ошибка при загрузке документа.")).finally(()=>t("SET_PROCESSING",!1))},CREATE_DOCUMENT({commit:t},{collection:e,doc:a}){return t("CLEAN_ERROR"),t("SET_PROCESSING",!0),i.a.post("/api/documents/create",{collection:e,doc:a}).catch(()=>t("SET_ERROR","Ошибка при создании документа.")).finally(()=>t("SET_PROCESSING",!1))},UPDATE_DOCUMENT({commit:t},{collection:e,query:a,doc:o}){return t("CLEAN_ERROR"),t("SET_PROCESSING",!0),i.a.post("/api/documents/update",{collection:e,query:a,doc:o}).catch(()=>t("SET_ERROR","Ошибка при сохранении документа.")).finally(()=>t("SET_PROCESSING",!1))},DELETE_DOCUMENT({commit:t},{collection:e,query:a}){return t("CLEAN_ERROR"),t("SET_PROCESSING",!0),i.a.post("/api/documents/delete",{collection:e,query:a}).catch(()=>t("SET_ERROR","Ошибка при удалении документа.")).finally(()=>t("SET_PROCESSING",!1))}};var We={actions:Je};const Ze={async UPLOAD_FILE({commit:t},{directory:e,file:a,name:o}){if(t("CLEAN_ERROR"),t("SET_PROCESSING",!0),void 0==a||"string"!=typeof e||"string"!=typeof o)return t("SET_ERROR","Ошибка при загрузке файла."),t("SET_PROCESSING",!1),!1;const n=1024e3;let r=new FileReader,l=0;try{while(l<a.size){let t=l+n+1,s=a.slice(l,t),c=await new Promise(t=>{r.onloadend=function(e){e.target.readyState===FileReader.DONE&&t(r.result)},r.readAsDataURL(s)});const d={directory:e,content:c,name:o,append:0!=l};await i.a.post("/api/static_files/upload",d),l=t}}catch(s){return t("SET_PROCESSING",!1),t("SET_ERROR","Ошибка при загрузке документа."),!1}return t("SET_PROCESSING",!1),!0}};var Qe={actions:Ze};const Xe={email:localStorage.getItem("user_email")||"",_id:localStorage.getItem("user_id")||""},ta={getUserEmail:t=>t.email,getUser_id:t=>t._id},ea={SET_USER_EMAIL(t,e){t.email=e,localStorage.setItem("user_email",e)},SET_USER_ID(t,e){t._id=e,localStorage.setItem("user_id",e)}};var aa={state:Xe,getters:ta,mutations:ea};o["a"].use(m["a"]);const oa=new m["a"].Store({modules:{app:Be,authentication:Ye,documents:We,files:Qe,user:aa}});var na=oa;o["a"].use(q["a"]);const ia=(t,e,a)=>{if(!na.getters.isUserAuthenticated)return a();a({name:"Index"})},ra=(t,e,a)=>{if(na.getters.isUserAuthenticated)return a();a({name:"Signin"})};var la=new q["a"]({routes:[{path:"/signin",name:"Signin",component:tt,beforeEnter:ia},{path:"/",redirect:"/index",beforeEnter:ra},{path:"/index",name:"Index",component:mt,beforeEnter:ra},{path:"/search",name:"Search",component:gt,beforeEnter:ra},{path:"/about",name:"About",component:Tt,beforeEnter:ra},{path:"/contact",name:"Contact",component:Ot,beforeEnter:ra},{path:"/terms",name:"Terms",component:At,beforeEnter:ra},{path:"/all_articles",name:"AllArticles",component:Gt,beforeEnter:ra},{path:"/articles",name:"Articles",component:ie,beforeEnter:ra},{path:"/articles/*",name:"Article",component:_e,beforeEnter:ra},{path:"/settings",name:"Settings",component:we,beforeEnter:ra},{path:"/robots.txt",name:"Robots",component:Ne,beforeEnter:ra},{path:"/ads.txt",name:"Ads",component:Ie,beforeEnter:ra}]}),sa=a("f309");o["a"].use(sa["a"]);var ca=new sa["a"]({icons:{iconfont:"mdi"}});o["a"].config.productionTip=!1,new o["a"]({router:la,store:na,vuetify:ca,render:t=>t(P)}).$mount("#app")},"71ec":function(t,e,a){},ed97:function(t,e,a){},fe0e:function(t,e,a){"use strict";var o=a("ed97"),n=a.n(o);n.a}});
//# sourceMappingURL=app.dab21bac.js.map